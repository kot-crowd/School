/*Ниже представлен пример кода на языке C для мониторинга температуры процессора на системе Linux. Этот код использует файловую систему /sys/class/thermal,
 которая предоставляет данные о температуре процессора в виде файлов. Конкретный файл, который обычно используется для мониторинга температуры,
 это thermal_zone0/temp (но на вашей системе это может быть немного другим).
 Как компилировать и запускать код:
Сохраните код в файл, например, cpu_temp_monitor.c.
Скомпилируйте код с помощью GCC:
gcc -o cpu_temp_monitor cpu_temp_monitor.c
Запустите программу. Вам могут потребоваться права суперпользователя для доступа к файлам в /sys/class/thermal:
sudo ./cpu_temp_monitor
Описание кода:
read_cpu_temperature: Эта функция открывает файл, содержащий данные о температуре, считывает его содержимое и возвращает температуру в градусах Цельсия.
main: Главная функция, которая запускает бесконечный цикл, считывает температуру процессора и выводит ее в консоль каждые 5 секунд.
Примечания:
Убедитесь, что на вашей системе действительно есть файл thermal_zone0/temp. Если нет, проверьте, какие именно пути доступны в /sys/class/thermal.
Программа может потребовать прав суперпользователя для доступа к данным о температуре, поэтому запускайте её через sudo, если это необходимо.
Температура может варьироваться в зависимости от нагрузки на процессор и системного охлаждения, так что результаты могут меняться.*/
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#define TEMP_FILE "/sys/class/thermal/thermal_zone0/temp"

float read_cpu_temperature()
{
    FILE *file = fopen(TEMP_FILE, "r");
    if (file == NULL)
    {
        perror("Ошибка открытия файла с температурой");
        return -1.0;
    }

    int temp_millidegrees;
    fscanf(file, "%d", &temp_millidegrees);
    fclose(file);

    // Конвертируем из миллиградусов Цельсия в градусы Цельсия
    return temp_millidegrees / 1000.0;
}

int main()
{
    while (1)
    {
        float temperature = read_cpu_temperature();
        if (temperature >= 0)
        {
            printf("Температура процессора: %.2f °C\n", temperature);
        }

        sleep(5); // Пауза 5 секунд между измерениями
    }

    return 0;
}